package inheritTest;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import org.hibernate.service.ServiceRegistry;import org.hibernate.service.ServiceRegistryBuilder;import org.huihui.app.domain.inherit.Customer;import org.huihui.app.domain.inherit.Employee;import org.huihui.app.domain.inherit.Manager;import org.huihui.app.domain.inherit.Person;/** * Created by huihui on 14-11-9. */public class PersonTest {    public static void main(String[] args) {        // --------------实例化Configration----------------------        Configuration conf = new Configuration().configure();        ServiceRegistry serviceRegistry = new ServiceRegistryBuilder()                .applySettings(conf.getProperties()).buildServiceRegistry();        //-------------------END----------------------------------        // 以Configuration实例创建SessionFactory实例        SessionFactory sf = conf.buildSessionFactory(serviceRegistry);        // 创建Session        Session sess = sf.openSession();        // 开始事务        Transaction tx = sess.beginTransaction();        // -------批量插入100条Person记录-------------        for (int i = 0; i < 10; i++) {            Person person = new Person();            person.setName("小普");            person.setGender('男');            person.getAddress().setCountry("中国");            person.getAddress().setDetail("天河");            person.getAddress().setZip("434333");            sess.save(person);            // 每当累加器的值是20的倍数时,将Session中数据刷入数据库            // 并清空Session缓存            if ( i % 20 == 0) {                sess.flush();                sess.clear();            }        }        // -------------------END---------------------////        // -------------定义批量更新的HOL语句------------------//        // 把Person的名字全部都替换为"新名字"//        String hqlUpdate = "update Person p set name = :newName";//        // 执行更新//        int updateEntities = sess.createQuery(hqlUpdate)//                .setString("newName","新名字")//                .executeUpdate();//        //---------------------END---------------------------////        // ------------定义批量删除的HQL语句------------------//        String hqlDelete = "delete Person";//        // 执行删除//        int deleteEntities = sess.createQuery(hqlDelete).executeUpdate();//        // ---------------------END----------------------------        // -------在数据库中插入Manager/Employee/Customer对象-------        Manager manager = new Manager();        manager.setName("Tom");        manager.setGender('男');        manager.getAddress().setCountry("美国");        manager.getAddress().setDetail("纽约");        manager.getAddress().setZip("100100");        manager.setSalary(8400);        manager.setTitle("项目经理");        manager.setDepartment("研发部");        Employee employee = new Employee();        employee.setName("老朱");        employee.setGender('男');        employee.getAddress().setCountry("中国");        employee.getAddress().setDetail("山东");        employee.getAddress().setZip("276400");        employee.setSalary(4500);        employee.setTitle("项目组长");        sess.save(employee);        sess.save(manager);        manager.getEmployees().add(employee);        employee.setManager(manager);        Customer customer = new Customer();        customer.setName("小美");        customer.setGender('女');        customer.getAddress().setCountry("中国");        customer.getAddress().setDetail("沂水");        customer.getAddress().setZip("276400");        customer.setComment("喜欢购物");        customer.setEmployee(employee);        sess.save(customer);        // -----------------END------------------------        //  提交事务        tx.commit();        // 关闭Session        sess.close();        sf.close();    }}